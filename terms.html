<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Terms Generator</title>

	<style>
		html>body{
			background: #62D0EA;
			transition: 0.3s;
		}
		html>body.dark{
			background: #62D0EA;
		}
		html>body h1{
			font-size: 30px;
		}

		section{
			background: #fff;
			transition: 0.3s;
		}

		.dark section{
			background: #252525;
			color: #fff;
		}

		.wrapper input, textarea{
			width: 100%;
		    display: block;
		    margin-bottom: 15px;
		    border-radius: 5px;
		    border: none;
		    padding: 10px;
		    box-sizing: border-box;
		    font-size: 18px;
		}
		button{
			margin: 10px auto 20px;
			background: #428C9D;
			transition: 0.3s;
			border: 2px solid #F4CA16;
			font-size: 18px;
			color:#F4CA16;
			padding: 10px 50px;
			border-radius: 5px;
			cursor: pointer;
			box-shadow: none;
		}

		button:hover{
			-webkit-box-shadow: 4px 4px 8px 0px rgba(34, 60, 80, 0.2);
			-moz-box-shadow: 4px 4px 8px 0px rgba(34, 60, 80, 0.2);
			box-shadow: 4px 4px 8px 0px rgba(34, 60, 80, 0.2);
		}
		.wrapper{
			width: 100%;
			max-width: 600px;
			margin: 0 auto;
		}
		.dark .container .wp-block-button a{
			background: rgba(255,255,255, 1);
		}

		/*Dark theme*/
		input[type="checkbox"] {
		  display: none;
		}
		label {
			padding-left: 20px;
			color: #F4CA16;
			font-weight: bold;
			font-size: 18px;
		}
		label::before {
			content: '';
			display: inline-block;
			width: 20px;
			height: 20px;
			vertical-align: middle;
			margin-left: -10px;
			margin-right: 10px;
			border-radius: 25px;
			border: 2px solid #F4CA16;
		}
		body.dark label{
			color: #252525;
		}
		body.dark label::before{
			border: 2px solid #252525;
		}
		input[type="checkbox"]:checked + label::before {
			content: '';
			background: #252525;
			background-size: 100%;
			/*background-image: url(data:image/svg+xml;utf8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pgo8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMTkuMC4wLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogNi4wMCBCdWlsZCAwKSAgLS0+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iTGF5ZXJfMSIgeD0iMHB4IiB5PSIwcHgiIHZpZXdCb3g9IjAgMCA0MjYuNjY3IDQyNi42NjciIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDQyNi42NjcgNDI2LjY2NzsiIHhtbDpzcGFjZT0icHJlc2VydmUiIHdpZHRoPSI1MTJweCIgaGVpZ2h0PSI1MTJweCI+CjxwYXRoIHN0eWxlPSJmaWxsOiM2QUMyNTk7IiBkPSJNMjEzLjMzMywwQzk1LjUxOCwwLDAsOTUuNTE0LDAsMjEzLjMzM3M5NS41MTgsMjEzLjMzMywyMTMuMzMzLDIxMy4zMzMgIGMxMTcuODI4LDAsMjEzLjMzMy05NS41MTQsMjEzLjMzMy0yMTMuMzMzUzMzMS4xNTcsMCwyMTMuMzMzLDB6IE0xNzQuMTk5LDMyMi45MThsLTkzLjkzNS05My45MzFsMzEuMzA5LTMxLjMwOWw2Mi42MjYsNjIuNjIyICBsMTQwLjg5NC0xNDAuODk4bDMxLjMwOSwzMS4zMDlMMTc0LjE5OSwzMjIuOTE4eiIvPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8L3N2Zz4K)*/
		}
		/*END Dark Theme*/

		@media screen  and (max-width: 415px) {
			.wrapper{
				width: 90%;
				margin-bottom: 15px;
			}
			html>body h1{
				font-size: 4.5vw;
			}
			button{
				padding: 10px 7vw;
			}
		}
		@media screen  and (max-width: 360px) {
			.wrapper{
				width: 90%;
			}
			html>body h1{
				font-size: 4.5vw;
			}
			button{
				padding: 10px 5vw;
			}
		}

		/*styles for copy ↓↓↓*/
		body,html{
			padding: 0;
			margin: 0;
		}
		body{
			color: #252525;
			background: #fff;
			margin: 0;
			box-sizing: border-box;
			text-align: justify;
			font-family: Arial, Helvetica, sans-serif;
		}
		body.dark{
			color: #fff;
			background: #252525;
		}
		.container{
			width: 100%;
			max-width: 600px;
			margin: 0 auto;
			padding: 20px;
			box-sizing: border-box;
		}
		h1{	
			padding-top: 0.7em;
			padding-bottom: 0.7em;
			font-size: 18px;
			font-weight: 700;
			text-align: center;
			/*padding-top: 30px;
			padding-bottom: 30px;*/
		}
		h1,h2{
			font-weight: bold;
		}
		h1{
			font-size: 25px;
		}
		h2{
			margin-top: 0.7em;
			margin-bottom: 0.7em;
			font-weight: 700;
			font-size: 16px;
			text-align: center;

		}
		p{
			margin-top: 0.7em;
			margin-bottom: 0.7em;
			font-size: 14px;
		}
		p.ul{
			margin-top: 0.5em;
			margin-bottom: 0.5em;
			margin-left: 30px;
			text-align: left;
		}
		a{
			text-decoration: none;
		}
		.wp-block-button a{
			display: inline-block;
			margin: 0 auto;
			padding: 5px 25px;
			font-size: 18px;
			line-height: 1.5em;
			text-align: center;
			color: #fff;
			text-transform: uppercase;
			text-decoration: none;
			letter-spacing: 1px;
			background-color: #252525;
			border-radius: 5px;
		}

		.dark .wp-block-button a{
			color: #252525;
		}

		.wp-block-button a:hover {
		  background-color: #3a3a3a;
		}

		.wp-block-button a:active {
		  background-color: #212121;
		}

		.dark .wp-block-button a:hover {
		  background-color: #D3D3D3;
		}

		.dark .wp-block-button a:active {
		  background-color: #D3D3D3;
		}

		.wp-block-button{
			text-align: center;
		}


		@media (min-width: 768px) {
		  .termz__title {
		    font-size: 20px;
		  }

		  .termz__subtitle {
		    font-size: 18px;
		  }

		  .termz__text {
		    font-size: 16px;
		  }

		  .termz__text--inner {
		    font-size: 16px;
		  }

		  .termz__link {
		    margin-top: 1em;
		  }
		}
	</style>

</head>
<body>
	<header>
		<div class="wrapper">
			<h1 class="main_title">Авто генерація термзів WORD → HTML</h1>
			<input class="input" type="text" placeholder="Title page">
			<textarea rows="10" cols="20" class="input" type="text" placeholder="Text"></textarea>
			<input class="input" type="text" placeholder="Button text">
			<button id="button_push">Згенерувати</button>
			<button id="button_copy">Скопіювати</button>
			<input type="checkbox" id="dark" name="dark_theme">
			<label for="dark">Темна Тема</label>

		</div>
	</header>

	<section>
		<div class="container"></div>
	</section>

<!-- 	<input id="all" type="hidden"> -->

								
	<script>
		let inputs = document.querySelectorAll('input');

		//Головна функція що формує контент сторінки - приймає значення від інпутів і текст ареа а момент натискання кнопки "Генерувати"
		function generatorPage(title,text,back){

			//Встановлює назву з першого інпута в ДОМ
			function setTitle(){
				const fullTitle = `<h1 class="title">${title}</h1>`;
				document.querySelector('.container').insertAdjacentHTML('beforeend', fullTitle);
			};
			setTitle();

			//Символи що розділятимуть текст на массив. Поміж них проскакує пробіл, тому це не кінцевий масив який будемо використовувати
			const separators = ['\t', '\n'];
			const resultBad = text.split(new RegExp(separators.join('|'), 'g'));

			//Перевіряємо кожне значення масиву і додаємо в новий, якщо воно не пусте
			let result = [];
			resultBad.forEach(item=>{
				//console.log(item);
				item === ' ' ? console.log('Empty element - skip it') : result.push(item);
			});

			//
			let filtered = result.filter(function (el) {
			  return el != '';
			});

			//Перевіряємо певний символ в строчці, щоб могти відрізнити це параграф, список чи підзаголовок.
			function isFirstLetter(str){
				let answer;
				var z = 0;
				var character = '';

				if (str.length) {
					while (z <= str.length){
					    character = str.charAt(0);
					    //console.log(character);
					    if (!isNaN(character * 1)){
					        answer = 'number';
					    }else{
					        if (character == character.toUpperCase()) {
					            answer = 'text U';
					        }
					        if (character == character.toLowerCase()){
					            answer = 'text l';
					        }
					    }
					    z++;
					}
					return answer;
				}
				else{
					console.log('Вставлені тільки числа, тому в нас не вийшов масив =( ');
				}
			}

			//Незалежно що нам приходить - формуємо строку, яку додаємо в ДОМ
			function formText(tagOpen,tagClose,text){
				
				let element = tagOpen + text + tagClose;
				document.querySelector('.container').insertAdjacentHTML('beforeend', element); 
				
			}

			//Інструкція для розпаршування типів строк що ми отримуємо в массиві. В залежності від типу - в параметри додаються інші теги
			let i = 0;
			for (let i = 0; i < filtered.length; i++) {
				let oneString = filtered[i];

				let paramOpentag, paramClosetag, text_content;

				if(isFirstLetter(filtered[i][0]) === 'text l' && filtered[i][1] === '.'){
					//console.log('Маленька буква = робимо список (пункт 6)');
					paramOpentag = '<p class="ul">';
					paramClosetag = '</p>';
					text_content = filtered[i]; 

				}
				else if(isFirstLetter(filtered[i][0]) === 'number'){
					//console.log('Отримали число, не важно якого рівня');

					if(filtered[i][1] === '.' && filtered[i][2] === ' '){
						//console.log('Заголовки порядково від 1 до 9-го');
						paramOpentag = '<h2>';
						paramClosetag = '</h2>';
						text_content = filtered[i];
					}

					else if(filtered[i][1] === '.' && isFirstLetter(filtered[i][2]) === 'number'){
						//console.log('Параграфи під любими номерами');
						paramOpentag = '<p>';
						paramClosetag = '</p>';
						text_content = filtered[i];
					}

					
					else if(isFirstLetter(filtered[i][1]) === 'number' && filtered[i][2] === '.'){

						if(filtered[i][3] === ' '){
							
							//console.log('Четвертим символом є пробіл - значить маємо підзаголовок від 10-го порядкового номеру');
							paramOpentag = '<h2>';
							paramClosetag = '</h2>';
							text_content = filtered[i]; 
						}
						else{
							//console.log('Підзаголовки вище 10-ки ');
							paramOpentag = '<p>';
							paramClosetag = '</p>';
							text_content = filtered[i];

						}
					}
					else{
						//console.log('Число коротке - значить ми отримали заголовок - тег h2');
						paramOpentag = '<h2>';
						paramClosetag = '</h2>';
						text_content = filtered[i]; 
					}
				}
				else{
					//console.log('Введений текст не містить номерів і тому він розпаршується як звичайний параграф');
					paramOpentag = '<p>'; paramClosetag = '</p>'; text_content = filtered[i];
				}

				//запускаємо формування тексту з певними параметрами які щойно налаштувалися
				formText(paramOpentag, paramClosetag, text_content);
			};

			//Додавання кнопки назад на сторінці - розмітка взята з сайту на ВП, може видозмінюватися, але я хотів щоб вони були ідентичні
			function setBackButton(){
				const fullButton = `<div class="wp-block-buttons is-content-justification-center">
										<div class="wp-block-button">
											<a class="wp-block-button__link" href="/">
												<strong>${back}</strong>
											</a>
										</div>
									</div>
									<br>
									<br>`;


				document.querySelector('.container').insertAdjacentHTML('beforeend', fullButton);
			};
			setBackButton();

		};

		//запускаємо головну функцію при натисканні кнопки "Генерувати"
		document.querySelector('#button_push').addEventListener('click', () => {document.querySelector('.container').innerHTML = ' '; generatorPage(inputs[0].value, document.querySelector('textarea').value, inputs[1].value)});

		
		//Функція що додає інпут на сторінку і в його значення заносить змінну, потім то значення пострапляє в буфер обміну
		function copyIt(text){
			let dummy = document.createElement("textarea");
			document.body.appendChild(dummy);
			dummy.value = text;
		    dummy.select();
		    document.execCommand("copy");
		    document.body.removeChild(dummy);

		    document.querySelector('#button_copy').textContent = 'Скопійовано';

		    setTimeout(()=>{
		    	document.querySelector('#button_copy').textContent = 'Скопіювати';
		    },1500);
		}

		//Активація функції копіювання - після кліку по кнопці "Скопіювати"
		document.querySelector('#button_copy').addEventListener('click', () => {
			let pageHtml = document.querySelector('.container').outerHTML;
			//console.log(pageHtml);
			copyIt(pageHtml);
		});

		let themeCounter = 0;
		document.querySelector('#dark').addEventListener('click', () => {
			themeCounter++;
			console.log('change theme');
			if(themeCounter % 2 == 1){
				document.querySelector('body').classList.add('dark');
			}
			else{
				document.querySelector('body').classList.remove('dark');
			}
		});
		
	</script>
								
</body>
</html>